<!-- profile.wxml -->
<view class="profile-container">
  <!-- 个人信息区 -->
  <view class="profile-header">
    <!-- 未登录状态显示登录按钮 -->
    <view class="login-section" wx:if="{{!isLoggedIn}}">
      <image class="avatar" src="{{userInfo.avatar}}"/>
      <text class="login-hint">请先登录</text>
      <button class="login-btn" type="primary" bindtap="goToLogin">登录 / 注册</button>
    </view>
    
    <!-- 已登录状态显示个人信息 -->
    <view class="avatar-section" wx:else>
      <image class="avatar" src="{{userInfo.avatar}}" bindtap="onAvatarTap"/>
      <button class="edit-btn" bindtap="editProfile">编辑资料</button>
    </view>
    <view class="user-info">
      <view class="nickname">{{userInfo.nickname}}</view>
      <view class="bio">{{userInfo.bio}}</view>
    </view>
    <view class="stats">
      <view class="stat-item">
        <view class="stat-number">{{userInfo.locationCount}}</view>
        <view class="stat-label">发布机位</view>
      </view>
      <view class="stat-item">
        <view class="stat-number">{{userInfo.favoriteCount}}</view>
        <view class="stat-label">被收藏</view>
      </view>
      <view class="stat-item">
        <view class="stat-number">{{userInfo.followerCount}}</view>
        <view class="stat-label">粉丝</view>
      </view>
    </view>
  </view>

  <!-- 功能菜单 - 只在登录状态显示 -->
  <view class="menu-section" wx:if="{{isLoggedIn}}">
    <view class="menu-title">我的</view>
    <view class="menu-items">
      <block wx:for="{{menuItems}}" wx:key="id">
        <view class="menu-item" bindtap="onMenuItemTap" data-id="{{item.id}}">
          <view class="menu-icon">
            <icon type="{{item.icon}}" size="24" color="#666"/>
          </view>
          <view class="menu-text">{{item.title}}</view>
          <view class="menu-badge" wx:if="{{item.badge}}">{{item.badge}}</view>
          <view class="menu-arrow">
            <icon type="arrowright" size="16" color="#999"/>
          </view>
        </view>
      </block>
    </view>
  </view>

  <!-- 系统设置 - 只在登录状态显示 -->
  <view class="menu-section" wx:if="{{isLoggedIn}}">
    <view class="menu-title">设置</view>
    <view class="menu-items">
      <block wx:for="{{settingItems}}" wx:key="id">
        <view class="menu-item" bindtap="onSettingItemTap" data-id="{{item.id}}">
          <view class="menu-icon">
            <icon type="{{item.icon}}" size="24" color="#666"/>
          </view>
          <view class="menu-text">{{item.title}}</view>
          <view class="menu-arrow">
            <icon type="arrowright" size="16" color="#999"/>
          </view>
        </view>
      </block>
      
      <!-- 注销按钮 -->
      <view class="menu-item logout-btn" bindtap="logout">
        <view class="menu-icon">
          <icon type="clear" size="24" color="#FF4D4F"/>
        </view>
        <view class="menu-text" style="color: #FF4D4F;">注销登录</view>
        <view class="menu-arrow">
          <icon type="arrowright" size="16" color="#999"/>
        </view>
      </view>
    </view>
  </view>
</view>